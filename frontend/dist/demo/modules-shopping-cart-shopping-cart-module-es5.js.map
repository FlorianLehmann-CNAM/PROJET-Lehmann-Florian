{"version":3,"sources":["webpack:///src/app/modules/shopping-cart/shopping-cart/shopping-cart.component.css","webpack:///src/app/modules/shopping-cart/shopping-cart-routing.module.ts","webpack:///src/app/modules/shopping-cart/shopping-cart.module.ts","webpack:///src/app/modules/shopping-cart/shopping-cart/shopping-cart.component.html","webpack:///src/app/modules/shopping-cart/shopping-cart/shopping-cart.component.ts"],"names":["routes","path","component","ShoppingCarteComponentRoutineModule","imports","forChild","exports","ShoppingCartModule","declarations","ShoppingCartComponent","store","products$","select","GetProducts","product","price","quantity","pipe","value","map","p","reduce","acc","dispatch","newQuantity","Number","target","selector","template"],"mappings":";;;;;;;;;;;;;;;;;;;;AAAA;AAAe;;;AAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACIf,UAAMA,MAAM,GAAW,CACnB;AACIC,YAAI,EAAE,EADV;AAEIC,iBAAS,EAAE;AAFf,OADmB,CAAvB;;UAWaC,mCAAmC;AAAA;AAAA,O;;AAAnCA,yCAAmC,6DAJ/C,+DAAS;AACNC,eAAO,EAAE,CAAC,6DAAaC,QAAb,CAAsBL,MAAtB,CAAD,CADH;AAENM,eAAO,EAAE,CAAC,4DAAD;AAFH,OAAT,CAI+C,GAAnCH,mCAAmC,CAAnC;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;UCCAI,kBAAkB;AAAA;AAAA,O;;AAAlBA,wBAAkB,6DAR9B,+DAAS;AACRC,oBAAY,EAAE,CAAC,4FAAD,CADN;AAERJ,eAAO,EAAE,CACP,4DADO,EAEP,iGAFO;AAFD,OAAT,CAQ8B,GAAlBG,kBAAkB,CAAlB;;;;;;;;;;;;;;;;AChBb;AAAe;;;AAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;UCkBFE,qBAAqB;AAGhC,uCAAoBC,KAApB,EAAkC;AAAA;;AAAd,eAAAA,KAAA,GAAAA,KAAA;AAAgB;;AAHJ;AAAA;AAAA,qCAKxB;AACN,iBAAKC,SAAL,GAAiB,KAAKD,KAAL,CAAWE,MAAX,CAAkB,mFAAkBC,WAApC,CAAjB;AACD;AAP+B;AAAA;AAAA,mDASPC,OATO,EASS;AACvC,mBAAOA,OAAO,CAACC,KAAR,GAAgBD,OAAO,CAACE,QAA/B;AACD;AAX+B;AAAA;AAAA,sDAaP;AACvB,mBAAO,KAAKL,SAAL,CAAeM,IAAf,CACL,2DAAI,UAACC,KAAD;AAAA,qBACFA,KAAK,CACFC,GADH,CACO,UAACC,CAAD;AAAA,uBAAgBA,CAAC,CAACJ,QAAF,GAAaI,CAAC,CAACL,KAA/B;AAAA,eADP,EAEGM,MAFH,CAEU,UAACC,GAAD,EAAMJ,KAAN;AAAA,uBAAgBI,GAAG,GAAGJ,KAAtB;AAAA,eAFV,EAEuC,CAFvC,CADE;AAAA,aAAJ,CADK,CAAP;AAOD;AArB+B;AAAA;AAAA,8CAuBf;AACf,iBAAKR,KAAL,CAAWa,QAAX,CAAoB,IAAI,oFAAJ,EAApB;AACD;AAzB+B;AAAA;AAAA,wCA2BlBT,OA3BkB,EA2BF;AAC5B,iBAAKJ,KAAL,CAAWa,QAAX,CAAoB,IAAI,6EAAJ,CAAeT,OAAf,CAApB;AACD;AA7B+B;AAAA;AAAA,4CA+BdA,OA/Bc,EA+BIU,WA/BJ,EA+BwB;AACtD,iBAAKd,KAAL,CAAWa,QAAX,CACE,IAAI,iFAAJ,CACET,OADF,EAEEW,MAAM,CAAED,WAAW,CAACE,MAAZ,CAAwCR,KAA1C,CAFR,CADF;AAMD;AAtC+B;;AAAA;AAAA,S;;;;gBAjBzB;;;;AAiBIT,2BAAqB,6DALjC,gEAAU;AACTkB,gBAAQ,EAAE,mBADD;AAETC,gBAAQ,EAAR,gFAFS;;AAAA,OAAV,CAKiC,GAArBnB,qBAAqB,CAArB","file":"modules-shopping-cart-shopping-cart-module-es5.js","sourcesContent":["export default \".card-footer-custom{\\r\\n    display:flex;\\r\\n    flex-direction:row;\\r\\n    margin: 5px;\\r\\n    margin-left: 15px;\\r\\n    justify-content: space-between;\\r\\n}\\r\\n\\r\\n.shopping-cart-title{\\r\\n    display: inline-flex;\\r\\n}\\r\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvbW9kdWxlcy9zaG9wcGluZy1jYXJ0L3Nob3BwaW5nLWNhcnQvc2hvcHBpbmctY2FydC5jb21wb25lbnQuY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0lBQ0ksWUFBWTtJQUNaLGtCQUFrQjtJQUNsQixXQUFXO0lBQ1gsaUJBQWlCO0lBQ2pCLDhCQUE4QjtBQUNsQzs7QUFFQTtJQUNJLG9CQUFvQjtBQUN4QiIsImZpbGUiOiJzcmMvYXBwL21vZHVsZXMvc2hvcHBpbmctY2FydC9zaG9wcGluZy1jYXJ0L3Nob3BwaW5nLWNhcnQuY29tcG9uZW50LmNzcyIsInNvdXJjZXNDb250ZW50IjpbIi5jYXJkLWZvb3Rlci1jdXN0b217XHJcbiAgICBkaXNwbGF5OmZsZXg7XHJcbiAgICBmbGV4LWRpcmVjdGlvbjpyb3c7XHJcbiAgICBtYXJnaW46IDVweDtcclxuICAgIG1hcmdpbi1sZWZ0OiAxNXB4O1xyXG4gICAganVzdGlmeS1jb250ZW50OiBzcGFjZS1iZXR3ZWVuO1xyXG59XHJcblxyXG4uc2hvcHBpbmctY2FydC10aXRsZXtcclxuICAgIGRpc3BsYXk6IGlubGluZS1mbGV4O1xyXG59Il19 */\";","import { NgModule } from '@angular/core';\r\nimport { RouterModule, Routes } from \"@angular/router\";\r\nimport { ShoppingCartComponent } from './shopping-cart/shopping-cart.component';\r\n\r\nconst routes: Routes = [\r\n    {\r\n        path: '',\r\n        component: ShoppingCartComponent\r\n    }\r\n];\r\n\r\n@NgModule({\r\n    imports: [RouterModule.forChild(routes)],\r\n    exports: [RouterModule]\r\n})\r\nexport class ShoppingCarteComponentRoutineModule{}","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { ShoppingCartComponent } from './shopping-cart/shopping-cart.component';\r\nimport { HttpClientModule } from '@angular/common/http';\r\nimport { ShoppingCarteComponentRoutineModule } from './shopping-cart-routing.module';\r\n\r\n\r\n\r\n@NgModule({\r\n  declarations: [ShoppingCartComponent],\r\n  imports: [\r\n    CommonModule,\r\n    ShoppingCarteComponentRoutineModule\r\n  ]\r\n\r\n})\r\nexport class ShoppingCartModule { }\r\n","export default \"<div class=\\\"shopping-cart-title\\\">\\r\\n  <h1>Panier (Prix total: {{ getShoppingCartTotalPrice() | async }}€)</h1>\\r\\n  <button\\r\\n    *ngIf=\\\"(products$ | async)?.length > 0\\\"\\r\\n    (click)=\\\"clearShoppingCart()\\\"\\r\\n    class=\\\"btn-primary\\\"\\r\\n  >\\r\\n    Vider le panier\\r\\n  </button>\\r\\n</div>\\r\\n<div *ngIf=\\\"(products$ | async)?.length == 0\\\">\\r\\n  <p>Vous n'avez aucun élément dans votre panier</p>\\r\\n</div>\\r\\n\\r\\n<div\\r\\n  class=\\\"card mb-2\\\"\\r\\n  style=\\\"max-width: 540px;\\\"\\r\\n  *ngFor=\\\"let product of products$ | async\\\"\\r\\n>\\r\\n  <div class=\\\"row no-gutters\\\">\\r\\n    <div class=\\\"col-md-4\\\">\\r\\n      <img [src]=\\\"product.imgUrl\\\" class=\\\"card-img\\\" [alt]=\\\"product.title\\\" />\\r\\n    </div>\\r\\n    <div class=\\\"col-md-8\\\">\\r\\n      <div class=\\\"card-body\\\">\\r\\n        <h5 class=\\\"card-title\\\">{{product.title}}</h5>\\r\\n        <p class=\\\"card-text\\\">{{product.description}}</p>\\r\\n        <p class=\\\"card-text\\\">\\r\\n          Quantitée :\\r\\n          <input\\r\\n            type=\\\"number\\\"\\r\\n            class=\\\"form-control\\\"\\r\\n            min=\\\"1\\\"\\r\\n            [value]=\\\"product.quantity\\\"\\r\\n            (change)=\\\"onQuantityChanged(product, $event)\\\"\\r\\n          />\\r\\n        </p>\\r\\n        <p class=\\\"card-text\\\">\\r\\n          Prix : {{getTotalPriceFromProduct(product)}}€ ({{product.price}}€ par\\r\\n          article)\\r\\n        </p>\\r\\n      </div>\\r\\n      <div class=\\\"card-footer-custom\\\">\\r\\n        <button class=\\\"btn-primary\\\" (click)=\\\"deleteProduct(product)\\\">\\r\\n          Supprimer du panier\\r\\n        </button>\\r\\n      </div>\\r\\n    </div>\\r\\n  </div>\\r\\n</div>\\r\\n\";","import { Component, OnInit } from \"@angular/core\";\r\nimport { Store } from \"@ngxs/store\";\r\nimport { Observable, of } from \"rxjs\";\r\nimport { filter, map } from \"rxjs/operators\";\r\nimport {\r\n  ClearShoppingCart,\r\n  DelProduct,\r\n  ModifyQuantity\r\n} from \"../../../store/actions/ShoppingCart.action\";\r\nimport { Product } from \"../../../models/Product\";\r\nimport { Article } from \"../../../models/ShoppingCart\";\r\nimport { ShoppingCartState } from \"../../../store/states/ShoppingCart.state\";\r\n\r\n@Component({\r\n  selector: \"app-shopping-cart\",\r\n  templateUrl: \"./shopping-cart.component.html\",\r\n  styleUrls: [\"./shopping-cart.component.css\"]\r\n})\r\nexport class ShoppingCartComponent implements OnInit {\r\n  products$: Observable<Article[]>;\r\n\r\n  constructor(private store: Store) {}\r\n\r\n  ngOnInit(): void {\r\n    this.products$ = this.store.select(ShoppingCartState.GetProducts);\r\n  }\r\n\r\n  getTotalPriceFromProduct(product: Article): number {\r\n    return product.price * product.quantity;\r\n  }\r\n\r\n  getShoppingCartTotalPrice(): Observable<number> {\r\n    return this.products$.pipe(\r\n      map((value: Article[]) =>\r\n        value\r\n          .map((p: Article) => p.quantity * p.price)\r\n          .reduce((acc, value) => acc + value, 0)\r\n      )\r\n    );\r\n  }\r\n\r\n  clearShoppingCart(): void {\r\n    this.store.dispatch(new ClearShoppingCart());\r\n  }\r\n\r\n  deleteProduct(product: Article): void {\r\n    this.store.dispatch(new DelProduct(product));\r\n  }\r\n\r\n  onQuantityChanged(product: Article, newQuantity: Event) {\r\n    this.store.dispatch(\r\n      new ModifyQuantity(\r\n        product,\r\n        Number((newQuantity.target as HTMLInputElement).value)\r\n      )\r\n    );\r\n  }\r\n}\r\n"]}